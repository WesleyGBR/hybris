"use strict";(self.webpackChunkyourstore=self.webpackChunkyourstore||[]).push([[54],{6054:(te,m,s)=>{s.r(m),s.d(m,{UserAccountModule:()=>oe});var e=s(4650),i=s(4006),r=s(8849),a=s(9144),x=s(591),C=s(5254),Z=s(1086),v=s(2994),F=s(7168),A=s(7545),u=s(6895),d=s(5391),p=s(7212);function T(n,t){1&n&&e._UZ(0,"cx-spinner",8)}const D=function(){return{cxRoute:"forgotPassword"}},I=function(){return{cxRoute:"register"}};function b(n,t){1&n&&(e.ynx(0),e.TgZ(1,"a",3),e.ALo(2,"cxUrl"),e._uU(3),e.ALo(4,"cxTranslate"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("routerLink",e.lcZ(2,2,e.DdM(6,I))),e.xp6(2),e.Oqu(e.lcZ(4,4,"loginForm.register")))}const R=function(){return{cxRoute:"checkoutLogin"}};function O(n,t){1&n&&(e.ynx(0),e.TgZ(1,"a",4),e.ALo(2,"cxUrl"),e._uU(3),e.ALo(4,"cxTranslate"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("routerLink",e.lcZ(2,2,e.DdM(6,R))),e.xp6(2),e.Oqu(e.lcZ(4,4,"loginForm.guestCheckout")))}const S=function(n){return{name:n}};function w(n,t){if(1&n&&(e.ynx(0),e.TgZ(1,"div",2),e._uU(2),e.ALo(3,"cxTranslate"),e.qZA(),e._UZ(4,"cx-page-slot",3),e.BQk()),2&n){const o=t.ngIf;e.xp6(2),e.hij(" ",e.xi3(3,1,"miniLogin.userGreeting",e.VKq(4,S,o.name))," ")}}const J=function(){return{cxRoute:"login"}};function k(n,t){1&n&&(e.TgZ(0,"a",4),e.ALo(1,"cxUrl"),e._uU(2),e.ALo(3,"cxTranslate"),e.qZA()),2&n&&(e.Q6J("routerLink",e.lcZ(1,2,e.DdM(6,J))),e.xp6(2),e.Oqu(e.lcZ(3,4,"miniLogin.signInRegister")))}const B=function(){return{cxRoute:"logout"}};function Q(n,t){if(1&n&&(e.ynx(0),e.TgZ(1,"div",2),e._uU(2),e.qZA(),e.TgZ(3,"a",3),e.ALo(4,"cxUrl"),e._uU(5),e.ALo(6,"cxTranslate"),e.qZA(),e.BQk()),2&n){const o=t.ngIf;e.xp6(2),e.AsE("",o.title,"",o.name,""),e.xp6(1),e.Q6J("routerLink",e.lcZ(4,4,e.DdM(8,B))),e.xp6(2),e.hij("",e.lcZ(6,6,"myAccountV2User.signOut")," ")}}let g=(()=>{class n{constructor(o,c,l){this.auth=o,this.globalMessage=c,this.winRef=l,this.busy$=new x.X(!1),this.isUpdating$=this.busy$.pipe((0,v.b)(f=>{const U=this.winRef.nativeWindow?.history?.state?.newUid;U&&this.form.patchValue({userId:U}),!0===f?this.form.disable():this.form.enable()})),this.form=new i.nJ({userId:new i.p4("",[i.kI.required,a.kal.emailValidator]),password:new i.p4("",i.kI.required)})}login(){this.form.valid?(this.busy$.next(!0),(0,C.D)(this.auth.loginWithCredentials(this.form.value.userId.toLowerCase(),this.form.value.password)).pipe((0,F.M)(this.auth.isUserLoggedIn()),(0,v.b)(([o,c])=>this.onSuccess(c))).subscribe()):this.form.markAllAsTouched()}onSuccess(o){o&&(this.globalMessage.remove(r.xUg.MSG_TYPE_ERROR),this.form.reset()),this.busy$.next(!1)}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(r.e80),e.LFG(r.IWp),e.LFG(r.X9E))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),G=(()=>{class n{constructor(o){this.service=o,this.form=this.service.form,this.isUpdating$=this.service.isUpdating$,this.style=!0}onSubmit(){this.service.login()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cx-login-form"]],hostVars:2,hostBindings:function(o,c){2&o&&e.ekj("user-form",c.style)},decls:25,vars:32,consts:[["class","overlay",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"label-content"],["required","true","type","email","formControlName","userId",1,"form-control",3,"placeholder"],[3,"control"],["required","true","type","password","formControlName","password","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],[1,"btn-link",3,"routerLink"],["type","submit",1,"btn","btn-block","btn-primary",3,"disabled"],[1,"overlay"]],template:function(o,c){1&o&&(e.YNc(0,T,1,0,"cx-spinner",0),e.ALo(1,"async"),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return c.onSubmit()}),e.TgZ(3,"label")(4,"span",2),e._uU(5),e.ALo(6,"cxTranslate"),e.qZA(),e._UZ(7,"input",3),e.ALo(8,"cxTranslate"),e._UZ(9,"cx-form-errors",4),e.qZA(),e.TgZ(10,"label")(11,"span",2),e._uU(12),e.ALo(13,"cxTranslate"),e.qZA(),e._UZ(14,"input",5),e.ALo(15,"cxTranslate"),e.ALo(16,"cxTranslate"),e._UZ(17,"cx-form-errors",4),e.qZA(),e.TgZ(18,"a",6),e.ALo(19,"cxUrl"),e._uU(20),e.ALo(21,"cxTranslate"),e.qZA(),e.TgZ(22,"button",7),e._uU(23),e.ALo(24,"cxTranslate"),e.qZA()()),2&o&&(e.Q6J("ngIf",e.lcZ(1,13,c.isUpdating$)),e.xp6(2),e.Q6J("formGroup",c.form),e.xp6(3),e.Oqu(e.lcZ(6,15,"loginForm.emailAddress.label")),e.xp6(2),e.s9C("placeholder",e.lcZ(8,17,"loginForm.emailAddress.placeholder")),e.xp6(2),e.Q6J("control",c.form.get("userId")),e.xp6(3),e.Oqu(e.lcZ(13,19,"loginForm.password.label")),e.xp6(2),e.s9C("placeholder",e.lcZ(15,21,"loginForm.password.placeholder")),e.uIk("aria-label",e.lcZ(16,23,"loginForm.password.placeholder")),e.xp6(3),e.Q6J("control",c.form.get("password")),e.xp6(1),e.Q6J("routerLink",e.lcZ(19,25,e.DdM(31,D))),e.xp6(2),e.hij(" ",e.lcZ(21,27,"loginForm.forgotPassword")," "),e.xp6(2),e.Q6J("disabled",c.form.disabled),e.xp6(1),e.hij(" ",e.lcZ(24,29,"loginForm.signIn")," "))},dependencies:[u.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,d.rH,a.Ahv,a.ORR,a.X84,u.Ov,r.l2T,r.X$D],encapsulation:2,changeDetection:0}),n})(),Y=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[(0,r.i51)({cmsComponents:{ReturningCustomerLoginComponent:{component:G,guards:[r.aOY],providers:[{provide:g,useClass:g,deps:[r.e80,r.IWp,r.X9E]}]}}})],imports:[u.ez,i.u5,i.UX,d.Bz,r.bhT,r.LUR,a.Fym,a.Fme,a.Ird]}),n})(),j=(()=>{class n{constructor(o){this.activatedRoute=o,this.loginAsGuest=!1}ngOnInit(){this.loginAsGuest=this.activatedRoute.snapshot.queryParams.forced}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cx-login-register"]],decls:6,vars:5,consts:[[1,"register"],[1,"cx-section-title"],[4,"ngIf"],[1,"btn","btn-block","btn-secondary","btn-register",3,"routerLink"],[1,"btn","btn-block","btn-secondary","btn-guest",3,"routerLink"]],template:function(o,c){1&o&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.ALo(3,"cxTranslate"),e.qZA(),e.YNc(4,b,5,7,"ng-container",2),e.YNc(5,O,5,7,"ng-container",2),e.qZA()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,3,"loginForm.dontHaveAccount")," "),e.xp6(2),e.Q6J("ngIf",!c.loginAsGuest),e.xp6(1),e.Q6J("ngIf",c.loginAsGuest))},dependencies:[u.O5,d.rH,r.l2T,r.X$D],encapsulation:2}),n})(),z=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[(0,r.i51)({cmsComponents:{ReturningCustomerRegisterComponent:{component:j,guards:[r.aOY]}}})],imports:[u.ez,d.Bz,r.bhT,a.ISW,r.LUR]}),n})(),h=(()=>{class n{constructor(o,c){this.auth=o,this.userAccount=c}ngOnInit(){this.user$=this.auth.isUserLoggedIn().pipe((0,A.w)(o=>o?this.userAccount.get():(0,Z.of)(void 0)))}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(r.e80),e.Y36(p.gf))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cx-login"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["login",""],[1,"cx-login-greet"],["id","account-nav","position","HeaderLinks"],["role","link",3,"routerLink"]],template:function(o,c){if(1&o&&(e.YNc(0,w,5,6,"ng-container",0),e.ALo(1,"async"),e.YNc(2,k,4,7,"ng-template",null,1,e.W1O)),2&o){const l=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,c.user$))("ngIfElse",l)}},dependencies:[u.O5,d.rH,a.JSc,u.Ov,r.l2T,r.X$D],encapsulation:2}),n})(),E=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[(0,r.i51)({cmsComponents:{LoginComponent:{component:h}}})],imports:[u.ez,d.Bz,r.bhT,a.ISW,r.LUR]}),n})(),V=(()=>{class n extends h{}return n.\u0275fac=function(){let t;return function(c){return(t||(t=e.n5z(n)))(c||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["cx-my-account-v2-user"]],features:[e.qOj],decls:3,vars:3,consts:[[1,"cx-my-account-v2-user"],[4,"ngIf"],[1,"cx-name"],[1,"cx-sign-out",3,"routerLink"]],template:function(o,c){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Q,7,9,"ng-container",1),e.ALo(2,"async"),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,c.user$)))},dependencies:[u.O5,d.rH,u.Ov,r.l2T,r.X$D],encapsulation:2}),n})(),X=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[(0,r.i51)({cmsComponents:{MyAccountViewUserComponent:{component:V,guards:[r.a1M]}}})],imports:[u.ez,d.Bz,r.bhT,r.LUR]}),n})(),$=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[E,Y,z,X]}),n})();const N=new e.OlP("UserAccountNormalizer");new e.OlP("UserAccountSerializer");class y{}let L=(()=>{class n{constructor(o){this.adapter=o}get(o){return this.adapter.load(o)}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(y))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),M=(()=>{class n{constructor(o,c,l){this.userAccountConnector=o,this.userIdService=c,this.query=l,this.userQuery=this.query.create(()=>this.userIdService.takeUserId(!0).pipe((0,A.w)(f=>this.userAccountConnector.get(f))),{reloadOn:[p.x7],resetOn:[r.p1J,r.rX_]})}getById(o){return this.userAccountConnector.get(o)}get(){return this.userQuery.get()}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(L),e.LFG(r.XBV),e.LFG(r._7J))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();const _=[M,{provide:p.gf,useExisting:M}];let q=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[L,..._]}),n})();var P=s(1737),H=s(7221),W=s(529);const K={backend:{occ:{endpoints:{user:"users/${userId}"}}}};let ee=(()=>{class n{constructor(o,c,l){this.http=o,this.occEndpoints=c,this.converter=l,this.logger=(0,e.f3M)(r.mQy)}load(o){const c=this.occEndpoints.buildUrl("user",{urlParams:{userId:o}});return this.http.get(c).pipe((0,H.K)(l=>(0,P._)((0,r.cxH)(l,this.logger))),this.converter.pipeable(N))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(W.eN),e.LFG(r.Lz0),e.LFG(r.IXI))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),ne=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[(0,r.i51)(K),{provide:y,useClass:ee}]}),n})(),oe=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[q,ne,$]}),n})()}}]);